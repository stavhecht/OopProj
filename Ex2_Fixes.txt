fixed code to support any number of rooms.
